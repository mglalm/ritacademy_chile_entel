<?xml version="1.0" encoding="UTF-8" ?>
<script name="OM_LISTENER.procesaOrden">
  <label>procesaOrden</label>
  <metaVersion>25</metaVersion>
  <parameterList>
    <parameter name="input" type="rifp">
      <type>nmeta_com.conceptwave.system.Object</type>
    </parameter>
  </parameterList>
  <script><![CDATA[
    //var doc = new Document("OM_CORE.processDocument");
    //doc.po = input.productOfferId;
    //doc.orderId = input.orderId;

    var orden = new Order("OM_CORE.orden");
    orden.datos.po = input.productOfferId;
    orden.datos.requesterId = input.orderId;
    orden.save();

    Process.startProcess("OM_CORE.procesaOrden",orden.id,null,null);

    var dt = new DataStructure("OM_LISTENER.response");
    dt.productOfferId = input.productOfferId;
    dt.orderId = input.orderId;
    dt.status = "P";

    return dt;
  ]]></script>
</script>