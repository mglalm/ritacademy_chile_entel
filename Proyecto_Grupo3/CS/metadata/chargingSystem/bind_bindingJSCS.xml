<?xml version="1.0" encoding="UTF-8" ?>
<binding name="chargingSystem.bindingJSCS">
  <extensionList>
    <extension name="creacionClienteCS" type="ext">
      <element>Operation</element>
      <elementItemMap>
        <elementItem key="script"><![CDATA[
          var fnd = new Finder('chargingSystem.findMSISDN');
          var doc = fnd.search();

          var i = 0;
          var output = new DataStructure("chargingSystem.responseCS");

          var grabar = 0;

          for (i=1;i<doc.length & grabar == 0;i=i+1)
          {
          if (doc[i].MSISDN == input.MSISDN) {grabar = 1; output.mensaje= "No/Ok"; output.estado = "MSISDN ya asignada"}
          }

          if (grabar == 0)
            {input.save(); output.mensaje= "Ok"; output.estado = "Plan Asignado a la MSISDN " + input.MSISDN;}

          //var doc = result && result.length>0 ? result[0] : null;


          //var output = new DataStructure("chargingSystem.responseCS");
          //output.mensaje = doc[1].MSISDN;
          //output.estado = "Plan Asignado a la MSISDN " + input.MSISDN;
          return output;
        ]]></elementItem>
      </elementItemMap>
    </extension>
  </extensionList>
  <interface>iface_chargingSystem.Crea_CLI_CS</interface>
  <label>Binding JS CS</label>
  <metaVersion>25</metaVersion>
  <provider>prov_cwf.jsprov</provider>
</binding>